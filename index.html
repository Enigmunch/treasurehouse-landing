<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Treasure House — AI Receptionist for Business | Your 24/7 Digital Employee</title>
  <meta name="description" content="The AI employee you've always wanted. Answers every call, books every appointment, speaks 20+ languages. Never sleeps, never calls in sick. Full-service AI receptionist for restaurants, clinics, salons, and service businesses. €350/month, everything included." />
  <meta name="keywords" content="AI receptionist, AI employee for business, virtual receptionist, AI phone answering, 24/7 AI assistant, AI butler for restaurants, AI receptionist for small business, automated appointment booking, AI customer service, AI lead qualification, AI answering service, digital employee, AI for hotels, AI for clinics, AI for salons, multilingual AI receptionist, WhatsApp business bot, business automation AI, AI agent Europe, AI receptionist Portugal" />
  <meta name="author" content="Treasure House" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://treasurehouse.art/" />
  <meta property="og:title" content="Treasure House — The AI Employee You've Always Wanted" />
  <meta property="og:description" content="Answers every call. Books every appointment. Speaks 20+ languages. Never sleeps. €350/month, everything included." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://treasurehouse.art/" />
  <meta property="og:site_name" content="Treasure House" />
  <meta property="og:locale" content="en_GB" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Treasure House — AI Receptionist for Business" />
  <meta name="twitter:description" content="The AI employee you've always wanted. Answers every call, books every appointment, speaks 20+ languages. €350/month." />
  <meta name="geo.region" content="PT-08" />
  <meta name="geo.placename" content="Algarve, Portugal" />
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"Treasure House","url":"https://treasurehouse.art","description":"AI receptionist factory delivering digital employees to small and medium businesses. Full-service AI agents that answer calls, book appointments, and handle customer inquiries 24/7.","areaServed":["PT","ES","GB","EU"],"knowsLanguage":["en","pt","es"],"address":{"@type":"PostalAddress","addressRegion":"Algarve","addressCountry":"PT"},"offers":{"@type":"Offer","price":"350","priceCurrency":"EUR","description":"AI receptionist — full-service, all channels included"}}</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MH4NSERDJK"></script>
  <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-MH4NSERDJK');</script>
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" type="image/png" href="/favicon-192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800;900&family=Source+Sans+3:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,400&display=swap" rel="stylesheet" />
  <style>
    :root{--cream:#FBF6EE;--sand:#F5EBD8;--teal:#1A9E96;--teal-hover:#158A83;--teal-light:rgba(26,158,150,0.06);--teal-border:rgba(26,158,150,0.15);--gold:#C8963E;--brown:#2C2417;--mid:#5C4F3D;--light:#8A7D6B;--white:#FFF;--stroke:rgba(44,36,23,0.08);--stroke2:rgba(44,36,23,0.10);--shadow:0 4px 14px rgba(44,36,23,0.07);--shadow-lg:0 8px 28px rgba(44,36,23,0.09);--heading:'Playfair Display',Georgia,serif;--body:'Source Sans 3',-apple-system,system-ui,sans-serif;--navh:64px;--max-w:1080px}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth;-webkit-font-smoothing:antialiased}
    body{font-family:var(--body);color:var(--brown);background:var(--cream);line-height:1.6;overflow-x:hidden}
    ::selection{background:var(--teal);color:#fff}a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max-w);margin:0 auto;padding:0 24px}
    .nav{position:fixed;top:0;left:0;right:0;height:var(--navh);z-index:100;background:rgba(251,246,238,0.88);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px);border-bottom:1px solid var(--stroke);transition:box-shadow .3s}
    .nav.scrolled{box-shadow:0 1px 10px rgba(44,36,23,0.06)}
    .nav-inner{max-width:var(--max-w);margin:0 auto;padding:0 24px;height:100%;display:flex;align-items:center;justify-content:space-between}
    .brand{font-family:var(--heading);font-size:20px;font-weight:700;letter-spacing:-0.02em}.brand .gold{color:var(--gold)}
    .nav-links{display:flex;align-items:center;gap:28px}
    .nav-link{font-size:14px;font-weight:500;color:var(--mid);transition:color .2s}.nav-link:hover{color:var(--brown)}
    .nav-cta{display:inline-flex;align-items:center;padding:9px 20px;background:var(--teal);color:#fff;font-size:13px;font-weight:600;border-radius:8px;transition:background .2s}.nav-cta:hover{background:var(--teal-hover)}
    .burger{display:none;width:36px;height:36px;background:none;border:none;cursor:pointer;flex-direction:column;align-items:center;justify-content:center;gap:4px}.burger span{display:block;width:18px;height:2px;background:var(--mid);border-radius:1px}
    .mobile-menu{display:none;position:absolute;top:var(--navh);left:0;right:0;background:rgba(251,246,238,0.96);backdrop-filter:blur(16px);border-bottom:1px solid var(--stroke);padding:12px 24px 16px}.mobile-menu.open{display:block}.mobile-menu a{display:block;padding:10px 0;font-size:15px;font-weight:500;color:var(--mid)}
    .hero{padding:calc(var(--navh) + 72px) 24px 32px;text-align:center;background:var(--cream);min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center}
    .hero-badge{display:inline-block;padding:6px 16px;border:1px solid var(--teal-border);border-radius:100px;font-size:12px;font-weight:600;color:var(--teal);letter-spacing:0.1em;text-transform:uppercase;margin-bottom:24px;background:var(--teal-light)}
    .hero h1{font-family:var(--heading);font-size:clamp(34px,5vw,56px);font-weight:700;color:var(--brown);line-height:1.1;letter-spacing:-0.02em;margin-bottom:28px;max-width:580px}
    .hero-sub{font-size:16px;color:var(--brown);font-weight:600;line-height:1.65;max-width:520px}
    .hero-verbs{margin-top:8px;max-width:640px;font-size:16px;font-weight:600;color:var(--brown);line-height:1.65;text-align:center}
    .hero-verbs-sep{color:var(--light);margin:0 6px}
    .hero-build{margin-top:32px;font-size:16px;font-weight:400;color:var(--mid);line-height:1.65;max-width:520px}
    .hero-arrow{width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-top:28px;animation:bounce 2.5s ease-in-out infinite}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(5px)}}
    .butler-section{background:var(--sand);padding:72px 24px 88px;scroll-margin-top:var(--navh)}
    .butler-wrap{max-width:640px;margin:0 auto}
    .butler-heading{text-align:center;margin-bottom:28px}
    .butler-heading h2{font-family:var(--heading);font-size:clamp(26px,3.5vw,38px);font-weight:700;color:var(--brown)}.butler-heading .your{color:var(--teal);font-weight:900}
    .chat{border-radius:20px;border:1px solid var(--stroke2);background:rgba(255,255,255,0.7);box-shadow:var(--shadow-lg);overflow:hidden}
    .chat-header{padding:14px 18px 12px;border-bottom:1px solid var(--stroke);display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,0.3)}
    .chat-title{display:flex;align-items:center;gap:8px;font-weight:700;font-size:14px}
    .avatar{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px;flex-shrink:0}
    .avatar.b{background:rgba(200,150,62,0.12);border:1px solid rgba(200,150,62,0.25);color:var(--gold)}
    .status{display:flex;align-items:center;gap:5px;font-size:12px;font-weight:600;color:var(--light)}
    .status-dot{width:7px;height:7px;border-radius:50%;background:#4CAF50;box-shadow:0 0 0 2px rgba(76,175,80,0.15)}
    .chat-body{padding:16px;min-height:220px;max-height:360px;overflow-y:auto;scroll-behavior:smooth}
    .msg{display:flex;gap:8px;margin:10px 0;align-items:flex-end;animation:fadeIn .3s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
    .msg.user{justify-content:flex-end}
    .bubble{max-width:80%;padding:10px 14px;border-radius:16px;font-size:14px;line-height:1.55;white-space:pre-wrap}
    .msg.butler .bubble{background:rgba(255,255,255,0.6);border:1px solid var(--stroke);border-bottom-left-radius:4px}
    .msg.user .bubble{background:rgba(26,158,150,0.10);border:1px solid var(--teal-border);border-bottom-right-radius:4px}
    .typing-dots{display:flex;gap:3px;padding:12px 16px;background:rgba(255,255,255,0.6);border:1px solid var(--stroke);border-radius:16px;border-bottom-left-radius:4px}
    .typing-dots span{width:6px;height:6px;border-radius:50%;background:var(--light);animation:tDot 1.4s ease-in-out infinite}
    .typing-dots span:nth-child(2){animation-delay:.2s}.typing-dots span:nth-child(3){animation-delay:.4s}
    @keyframes tDot{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-3px);opacity:1}}
    .chat-footer{padding:12px 18px 16px;border-top:1px solid var(--stroke);background:rgba(255,255,255,0.2)}
    .input-row{display:flex;gap:8px;align-items:center}
    .chat-input-wrap{flex:1;display:flex;align-items:center;border-radius:999px;border:1px solid var(--stroke2);background:rgba(255,255,255,0.55);padding:8px 12px;transition:border-color .2s}.chat-input-wrap:focus-within{border-color:var(--teal)}
    .chat-input{border:none;outline:none;width:100%;font-size:14px;font-family:var(--body);background:transparent;color:var(--brown)}.chat-input::placeholder{color:var(--light)}
    .send-btn{width:40px;height:40px;border-radius:12px;border:1px solid rgba(26,158,150,0.25);background:var(--teal);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:background .2s,transform .1s;box-shadow:0 3px 10px rgba(26,158,150,0.18)}.send-btn:hover{background:var(--teal-hover);transform:translateY(-1px)}
    .chips{margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:7px}.chips.hidden{display:none}
    .chip{text-align:left;border-radius:14px;border:1px solid var(--stroke2);background:rgba(255,255,255,0.5);padding:10px 12px;cursor:pointer;transition:transform .12s,box-shadow .12s,border-color .12s;box-shadow:0 1px 3px rgba(44,36,23,0.05)}.chip:hover{transform:translateY(-1px);box-shadow:var(--shadow);border-color:rgba(200,150,62,0.28)}
    .chip strong{display:block;font-size:13px;font-weight:700;color:var(--brown);line-height:1.3}.chip span{display:block;margin-top:4px;font-size:11.5px;color:var(--light);line-height:1.3}
    .pricing-section{background:var(--cream);padding:88px 24px;scroll-margin-top:var(--navh)}
    .pricing-card{max-width:480px;margin:0 auto;background:var(--teal);border-radius:20px;padding:36px 32px;color:#fff;box-shadow:0 6px 24px rgba(26,158,150,0.18)}
    .pricing-card h2{font-family:var(--heading);font-size:clamp(26px,3.5vw,38px);font-weight:700;margin-bottom:4px;color:#fff;text-align:center}
    .pricing-subtitle{font-size:15px;color:rgba(255,255,255,0.7);text-align:center;margin-bottom:24px}
    .pricing-price{font-family:var(--heading);font-size:48px;font-weight:700;text-align:center;margin-bottom:24px;color:#fff}.pricing-price span{font-family:var(--body);font-size:16px;font-weight:500;opacity:0.65}
    .pricing-features{list-style:none;display:flex;flex-direction:column;gap:10px;margin-bottom:28px}
    .pricing-feature{display:flex;gap:8px;align-items:flex-start;font-size:14px;line-height:1.4;color:rgba(255,255,255,0.88)}
    .pricing-check{width:18px;height:18px;flex-shrink:0;margin-top:1px;color:rgba(255,255,255,0.8)}
    .pricing-btn{display:block;width:100%;padding:14px;border-radius:10px;font-family:var(--body);font-size:15px;font-weight:600;text-align:center;cursor:pointer;transition:all .2s;border:none;background:#fff;color:var(--teal)}.pricing-btn:hover{background:rgba(255,255,255,0.9)}
    .pricing-note{text-align:center;margin-top:16px;font-size:13px;color:rgba(255,255,255,0.55)}
    .footer{background:var(--brown);padding:40px 24px}
    .footer-inner{max-width:var(--max-w);margin:0 auto;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:20px}
    .footer .brand{color:var(--cream);font-size:18px}
    .footer-links{display:flex;gap:20px;align-items:center}.footer-links a{font-size:13px;font-weight:500;color:rgba(251,246,238,0.55);transition:color .2s}.footer-links a:hover{color:var(--cream)}
    .footer-bottom{max-width:var(--max-w);margin:0 auto;padding:0 24px;text-align:center}
    .footer-divider{width:100%;height:1px;background:rgba(251,246,238,0.08);margin:20px 0}
    .footer-copyright{font-size:12px;color:rgba(251,246,238,0.35)}
    @keyframes slideUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
    .anim{animation:slideUp .55s ease both}
    .anim[style*="delay:0.1"]{animation-delay:0.1s}
    .anim[style*="delay:0.18"]{animation-delay:0.18s}
    .anim[style*="delay:0.24"]{animation-delay:0.24s}
    .anim[style*="delay:0.3"]{animation-delay:0.3s}
    .anim[style*="delay:0.38"]{animation-delay:0.38s}
    .anim[style*="delay:0.12"]{animation-delay:0.12s}
    .scroll-anim{animation:slideUp .55s ease both;animation-delay:0.1s}
    @media(max-width:900px){.nav-links{display:none}.burger{display:flex}.chips{grid-template-columns:1fr}.hero-verbs{font-size:15px}.hero-verbs .hero-verbs-sep{display:inline}}
    @media(min-width:901px){.burger{display:none}.mobile-menu{display:none!important}}
    .chat-body::-webkit-scrollbar{width:4px}.chat-body::-webkit-scrollbar-track{background:transparent}.chat-body::-webkit-scrollbar-thumb{background:rgba(44,36,23,0.10);border-radius:2px}
  </style>
</head>
<body>
  <header class="nav" id="nav"><div class="nav-inner">
    <a class="brand" href="#">Treasure <span class="gold">House</span></a>
    <div class="nav-links"><a class="nav-link" href="#butler">Butler</a><a class="nav-link" href="#pricing">Pricing</a><a class="nav-cta" href="#butler">Talk to the Butler</a></div>
    <button class="burger" id="burger" aria-label="Menu"><span></span><span></span><span></span></button>
  </div><div class="mobile-menu" id="mobileMenu"><a href="#butler" class="mm-link">Butler</a><a href="#pricing" class="mm-link">Pricing</a><a class="nav-cta mm-link" href="#butler" style="margin-top:10px;display:block;text-align:center;">Talk to the Butler</a></div></header>

  <section class="hero" id="top">
    <div class="anim"><div class="hero-badge">AI Receptionist for Business</div></div>
    <div class="anim" style="transition-delay:0.1s"><h1>The employee you&#x27;ve always wanted</h1></div>
    <div class="anim" style="transition-delay:0.18s"><div class="hero-sub">Works 24/7. Speaks 20+ languages. Never calls in sick.</div></div>
    <div class="anim" style="transition-delay:0.24s"><div class="hero-verbs">Answers every call<span class="hero-verbs-sep"> &#xB7; </span>Books every appointment<span class="hero-verbs-sep"> &#xB7; </span>Qualifies every lead<span class="hero-verbs-sep"> &#xB7; </span>Reminds every client<span class="hero-verbs-sep"> &#xB7; </span>Replies in 3 seconds</div></div>
    <div class="anim" style="transition-delay:0.3s"><div class="hero-build">We build it. We maintain it. We improve it every week.</div></div>
    <div class="anim" style="transition-delay:0.38s"><a href="#butler" class="hero-arrow" aria-label="Scroll to Butler"><svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M6 10L12 16L18 10" stroke="#8A7D6B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></a></div>
  </section>

  <section class="butler-section" id="butler"><div class="butler-wrap">
    <div class="butler-heading scroll-anim"><h2>Meet <span class="your">YOUR</span> Butler</h2></div>
    <div class="chat scroll-anim" style="transition-delay:0.12s">
      <div class="chat-header"><div class="chat-title"><div class="avatar b">B</div><span>Treasure House Butler</span></div><div class="status"><span class="status-dot"></span>Online</div></div>
      <div class="chat-body" id="chatBody"><div class="msg butler"><div class="avatar b">B</div><div class="bubble">Good evening. I&#x27;m your Butler. Shall we see which of your employees I can replace?</div></div></div>
      <div class="chat-footer">
        <div class="input-row"><div class="chat-input-wrap"><input class="chat-input" id="chatInput" type="text" placeholder="Ask the Butler anything..." autocomplete="off" /></div><button class="send-btn" id="sendBtn" aria-label="Send"><svg width="16" height="16" viewBox="0 0 18 18" fill="none"><path d="M2 9L16 2L9 16L8 10L2 9Z" fill="white" stroke="white" stroke-width="1.2" stroke-linejoin="round"/></svg></button></div>
        <div class="chips" id="chips">
          <button class="chip" data-key="calls"><strong>I want every call answered, even at 3 AM</strong><span>85% of callers never call back &#x2014; they call your competitor</span></button>
          <button class="chip" data-key="noshow"><strong>I want clients to actually show up</strong><span>One empty table per night = &#x20AC;36,000 lost per year</span></button>
          <button class="chip" data-key="faq"><strong>I want to stop repeating the same answers</strong><span>While your team answers &#x22;are you open today?&#x22;, 3 paying customers walk past</span></button>
          <button class="chip" data-key="growth"><strong>I want more customers without hiring anyone</strong><span>Your competitors already reply in 5 seconds. 24/7. In 3 languages.</span></button>
          <button class="chip" data-key="staff"><strong>I want staff that never calls in sick</strong><span>Every sick day = 8 hours of unanswered calls, unbooked tables, lost deals</span></button>
        </div>
      </div>
    </div>
  </div></section>

  <section class="pricing-section" id="pricing"><div class="wrap">
    <div class="pricing-card scroll-anim">
      <h2>Your Butler</h2>
      <div class="pricing-subtitle">One employee. Every channel. Everything included.</div>
      <div class="pricing-price">&#x20AC;350<span>/month</span></div>
      <ul class="pricing-features">
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Website chat · WhatsApp · SMS</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Answers questions, books appointments, qualifies leads</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Sends reminders &#x2014; reduces no-shows</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>20+ languages, auto-detects mid-conversation</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Works 24/7, handles unlimited conversations</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>We set it up, we run it, we improve it &#x2014; you do nothing</li>
        <li class="pricing-feature"><svg class="pricing-check" viewBox="0 0 20 20" fill="none"><path d="M4 10.5L8 14.5L16 5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Priority support</li>
      </ul>
      <a class="pricing-btn" href="#butler">Talk to the Butler</a>
      <div class="pricing-note">Need voice calls or custom integrations? Talk to the Butler &#x2014; he&#x27;ll sort it out.</div>
    </div>
  </div></section>

  <footer class="footer"><div class="footer-inner"><div class="brand">Treasure <span class="gold">House</span></div><div class="footer-links"><a href="#butler">Butler</a><a href="#pricing">Pricing</a><a href="/cdn-cgi/l/email-protection#731b161f1f1c3307011612000601161b1c0600165d120107">Contact</a></div></div><div class="footer-bottom"><div class="footer-divider"></div><div class="footer-copyright">&#xA9; 2025 Treasure House</div></div></footer>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    const $=(s,c=document)=>c.querySelector(s),$$=(s,c=document)=>c.querySelectorAll(s);
    window.addEventListener('scroll',()=>$('#nav').classList.toggle('scrolled',window.scrollY>15));
    const burger=$('#burger'),mm=$('#mobileMenu');
    burger.addEventListener('click',()=>mm.classList.toggle('open'));
    $$('.mm-link').forEach(a=>a.addEventListener('click',()=>mm.classList.remove('open')));
    document.addEventListener('click',e=>{if(!mm.contains(e.target)&&!burger.contains(e.target))mm.classList.remove('open')});
    // Scroll animations for below-fold elements
    const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target)}})},{threshold:0.1});
    $$('.scroll-anim').forEach(el=>obs.observe(el));
    // ── Butler Chat — n8n Dual-Agent Backend ──
    const WEBHOOK_URL='https://enigmunch.app.n8n.cloud/webhook/butler-chat';
    const TIMEOUT_MS=15000;
    const chatBody=$('#chatBody'),input=$('#chatInput'),sendBtn=$('#sendBtn'),chips=$('#chips');
    const history=[];
    const sessionId=localStorage.getItem('th_session')||crypto.randomUUID();
    localStorage.setItem('th_session',sessionId);
    let sending=false;

    function appendMsg(role,text){
      const w=document.createElement('div');w.className='msg '+role;
      if(role==='butler'){const a=document.createElement('div');a.className='avatar b';a.textContent='B';w.appendChild(a)}
      const b=document.createElement('div');b.className='bubble';
      b.innerHTML=text.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
        .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>').replace(/\n/g,'<br>');
      w.appendChild(b);chatBody.appendChild(w);chatBody.scrollTop=chatBody.scrollHeight;
    }

    function showTyping(){
      const w=document.createElement('div');w.className='msg butler';w.id='typing-indicator';
      const a=document.createElement('div');a.className='avatar b';a.textContent='B';w.appendChild(a);
      const d=document.createElement('div');d.className='typing-dots';d.innerHTML='<span></span><span></span><span></span>';
      w.appendChild(d);chatBody.appendChild(w);chatBody.scrollTop=chatBody.scrollHeight;
    }

    function hideTyping(){const t=$('#typing-indicator');if(t)t.remove();}

    async function sendToButler(userText){
      if(sending)return;
      sending=true;
      input.disabled=true;sendBtn.disabled=true;sendBtn.style.opacity='0.5';
      history.push({role:'user',content:userText});
      showTyping();
      try{
        const ctrl=new AbortController();
        const tid=setTimeout(()=>ctrl.abort(),TIMEOUT_MS);
        const res=await fetch(WEBHOOK_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({session_id:sessionId,message:userText,history:history.slice(-20)}),
          signal:ctrl.signal
        });
        clearTimeout(tid);
        if(!res.ok)throw new Error('HTTP '+res.status);
        const data=await res.json();
        const reply=(data.reply||data.response||'I apologise — could you repeat that?')
          .replace(/<!--LEAD_DATA[\s\S]*?LEAD_DATA-->/g,'').trim();
        hideTyping();
        appendMsg('butler',reply);
        history.push({role:'assistant',content:reply});
      }catch(err){
        hideTyping();
        history.pop();
        if(err.name==='AbortError'){
          appendMsg('butler','Apologies — I seem to be taking longer than usual. Could you try again in a moment?');
        }else{
          console.error('Butler error:',err);
          appendMsg('butler','My apologies — brief interruption. Please try again, or reach us at hello@treasurehouse.art.');
        }
      }
      sending=false;
      input.disabled=false;sendBtn.disabled=false;sendBtn.style.opacity='1';
      input.focus();
    }

    function handleSend(text){
      const t=(text||'').trim();if(!t)return;
      appendMsg('user',t);input.value='';
      chips.classList.add('hidden');
      sendToButler(t);
    }

    $$('.chip').forEach(btn=>btn.addEventListener('click',()=>{
      const txt=btn.querySelector('strong').textContent;
      appendMsg('user',txt);input.value='';
      chips.classList.add('hidden');
      sendToButler(txt);
    }));
    sendBtn.addEventListener('click',()=>handleSend(input.value));
    input.addEventListener('keydown',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSend(input.value)}});
  </script>
</body>
</html>